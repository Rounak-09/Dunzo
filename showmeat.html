<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles\navbar.css">
    <script src="https://kit.fontawesome.com/32f181d7c4.js" crossorigin="anonymous"></script>
    <style>
        body{
            font-family: Gilroy,sans-serif;
            font-weight: 500;
        }
        #content-head{
        box-sizing: border-box;
        display: flex;
        align-items: flex-start;
        width: 100%;
        top: 0px;
        background: rgb(247, 253, 250);
        }
        #father{
            height: 250px;
            background: rgb(247, 253, 250);
            
        }
        #father div{
            margin: auto;
            margin-left: 50px;
            justify-content: center;
          
        }
        #FishHome{
            display: flex;
            box-sizing: border-box;
            
        }
        #imghome{
            display: flex;
            box-sizing: border-box;
            margin: auto;
            margin-right: 10px;
        }
        #imghome img{
            height: 150px;
            width: 150px;
            margin-top: 20px;
        }
        #datas{
            display: flex;
            gap: 15px;
            color: #808080;
        }
        #datas i{
          margin-top: 17px;
          color: aquamarine;
        }
        #datas p:first-child{
            margin-left: -45px;
        }
        #datas p:last-child{
            color: blueviolet;
        }
        /* for serch */
        #search{
height:100px;
width:100%;
margin-bottom: 15px;
margin-top: 5px;
}
#search>input{
border: 1px solid darkgray;
width:37%;
height: 50px;
border-radius: 5px;
margin-top: 10px;
margin-left: 346px;
position: relative;
background-color: white;
font-size: 17px;
text-align: center;
z-index: 0;
}
#search>img{
height:20px;
position: absolute;
margin-left:370px;
margin-top: 25px;
z-index: 1;
}
        /* body */
        #products{
    display: flex;
    flex-direction: row;
    width:100%;
    background-color: #fff;
    }
    
    #products1,#products2,#products3{
    height:400px
    }
    /* priducts1 */
    
    #products>#products1{
    width:24%;
    display: flex;
    overflow: scroll;
    flex-direction: column;
    padding-top: 50px;
    overflow-x: hidden;
    }
    
    #products1 > button{
    text-align: right;
    height: 45px;
    font-size: 15px;
    color: grey;
    background-color: #fff;
    border: none;
    }
    
    #products1 > button:hover{
    cursor: pointer;
    }
    /* ---------------------------------------------Products part -2 -----------------------*/
    
    #products>#products2{
    width:40%;
    display: flex;
    flex-direction: column;
    overflow: scroll;
    overflow-x: hidden;
    }
    #bar{
    height:10px;
    width:5px;
    background-color: chartreuse;
    }
    
    /* --------------------------------------Products part2 shop products -------------------------*/
    
    #products2>#heading{
    height:60px;
    padding-left: 24px;
    padding-top: 18px;
    font-size: 30px;
    font-weight: 400;
    background-color: rgb(243, 243, 245);
    }
    
    #img{
    width:20px;
    }
    
    #divs{
    display: flex;
    flex-direction: row;
    width:100%;
    height:150px;
     align-items: center;
    line-height: 20px;
    }
    #divs>img{
    height: 60%;
    width:20%;
    }
    
    #divs>button{
    margin-left: 10px;
    color:rgb(0, 179, 122);
    border-color: rgb(0, 179, 122);
    border:1px solid;
    background-color: transparent;
    border-radius: 15px;
    height:30px;
    width:60px;
    cursor: pointer;
    }
    
    #details{
    width:300px;
    height:80px;
    display: flex;
    margin-left: 25px;
    padding-top: 5px;
    flex-direction: column;
    }
    
    .quantity{
    font-size: 12px;
    color:grey
    }
    .name{
    font-size: 17px;
    font-weight: 400;
    color:black;
    }
    
     /* ---------------------Products part - 3 ----------------------------------*/
    
     #products>#products3{
    width:38%;
    cursor: pointer;
    }
    
    #products3>p{
    font-size: 28px;
    margin-top: 20px;
    margin-left: 10px;
    color:grey;
    }
    
    #products3>img{
    width:300px;
    height:300px;
    margin-left: 16%;
    }
    
    #products3>h4{
    text-align: center;
    color:grey;
    font-weight: 300;
    }
    
    .transform{
    box-shadow: 3px 0px 10px 0px lightgray;
    }
    .transformBack{
    box-shadow: 0;
    }
    
    ul {
    list-style: none;
    }
    
    ul li::before {
    content: "\2022";  
    
    font-weight: bold; 
    display: inline-block;
    width: 1em; 
    margin-left: -1em; 
    }
    
    #box{
    height: 30px;
    width: 100px;
    border-radius: 15px;
    border:1px solid lightgray;
    display: flex;
    margin: auto;
    }
    
    #box button{
    height: 30px;
    width: 30px;
    font-size: large;
    font-weight: bold;
    border: none;
    border-color: inherit;
    border-radius: 50%;
    background-color: transparent;
    }
    #plus{
    color:green;
    }
    #val{
    margin-top: 5px;
    margin-right: 5%;
    margin-left: 5%;
    }
    
    #box button:hover{
    cursor: pointer;
    box-shadow: 1px 1px 1px 1px lightgray;
    }
    .menu{
    color:rgb(0, 179, 122);
    border-right-color: rgb(0, 179, 122);
    border-right: 1px solid black;
    border-width: 4px;
    }
    
    #checkout{
    background-color:white;
    height: 60px;
    bottom: 0%;
    position: relative;
    }
    
    #checkout button{
    height: 30px;
    background-color:rgb(0,210,144);
    border-radius: 15px;
    font-size: large;
    font-weight: bold;
    position: absolute;
    right: 50%;
    top:50%;
    }
    .checkout{
    /* border-color:"rgb(0, 179, 122)"; */
    width:200px;
    background-color: transparent;
    height: 20px;
    border-radius: 20px;
    }
    
    #cart{
    position: relative;
    }
    
    #cart > #circle{
    position: absolute;
    bottom: 60%;
    left: 70%;
    }
    
    #circle{
    display: initial;
    width: 20px;
    border-radius: 20px;
    background-color: red;
    position: absolute;
    height: 20px;
    text-align: center;
    color: white;
    }
    h5{
        margin-top: -40px;
        text-decoration: solid black;
    }
    </style>
</head>
<body>
    <!-- for header -->
    <div id="menubar">
        <div id="menuLeft">
            <div><img src="https://resources.dunzo.com/web-assets/prod/_next/static/images/logo-7b2b540792556466133aea6e7c6ae513.png"></div>
            <div class="menuTop"><select class="options"><option>Location</option></select></div>
        </div>
        <div id="menuRight">
           
            <div class="hover"><i class="fa-solid fa-cart-shopping icons"></i><p class="iconText">Cart</p></div>
            <div class="hover"><i class="fa-regular fa-user icons"></i><p class="iconText">Profile</p></div>
        </div>
    </div>
<!-- ---------------------------------------- -->

<!-- for the rgb(0,210,144 color div -->
    <div id="father">
        <div id="content-head">
        <div id="FishHome">
            <div id="imghome">
       <img src="https://ik.imagekit.io/dunzo/dunzo-catalog-prod/tr:w-220,h-220,cm-pad_resize_store_thumbnail/stores/a3RHOTVjUkFJb21TNEw0ZFBCQktSZz09-1589866532874-store_image.jpg" 
        height="64px" width="64px" box-sizing = "border-box" >
    </div>
      
        <div id="textc">
            <h1 id="mt">Meat & Fish</h1>
            <div id="datas">
            <p>kurla west</p>
            <i class="fa-solid fa-clock"></i>
         
            <p>23 mins</p>
            
            <p>Free Delivery</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- ............................................................. -->
    <div id="search">
        <img src="https://www.bing.com/th?id=OIP.S4taeGPIeZrjdwqrkjDRnAHaGH&w=274&h=227&c=8&rs=1&qlt=90&o=6&pid=3.1&rm=2">
        <input type="search" id="searchBar" placeholder="Search in Meat&Fish">
        </div>
        <div>

        <!-- body -->

        
        <hr/>
        <div id="products">
        <div id="products1">
        <button onclick="displayitems(event,'PBO')" style="font-size: large; font-weight: bold; color: green;">Fresh Chicken</button>
        <button onclick="displayitems(event,'cuts')">Eggs</button>
        <button onclick="displayitems(event,'herbs')">Mutton</button>
        <button onclick="displayitems(event,'veg')">Cuts And Sea Foods</button>
        </div>


        <div id="products2">
        <div id="heading"><p>Meat&Fish</p></div>
        <div id='prds'></div>
        </div>
        <div id="products3">
        <p>Your Cart</p>
        <img src="https://resources.dunzo.com/web-assets/prod/_next/static/images/no-items-in-cart-7e84056f44993b68d14184f9b2992af7.png">
        <h4>Your cart is empty</h4>
        <br> 
        <h4>Add items to get started</h4>
        </div>
        </div>
        </div>
        </div>
        </div>

        
</body>
</html>
<script>

let before_element = document.getElementById('products1').querySelector('button');
let before_div = 0;

  // ----------------Fresh Fruits Objects----------------------------------------------------------------------------------------------------------------------
  
  let Papaya = [
    {
        name: "Chickens"
    },
    {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/MGdFRlFaM00wMjdlY0wva0lqRlhQQT09-product_image.jpg",name:"Chicken Breat strips", price:123},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/1646206064623_product_5bcf812a752feb5014a2e2d5_1.jpg",name:" Boneless Chicken", price:523},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/RTd1WE5ndkh0WHVmdE1aQ3ZQVWlaQT09-product_image.jpg",name:"Chicken Fry Cut", price:233},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/1644858426890_product_5cb462e6f3995b3a4e6da393_1.jpg",name:"Chicken Curry Cut", price:543},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/S1RCdjFobVJkZzZXaWs4VkM3OEhrQT09-product_image.jpg",name:"Broiler Chicken", price:223},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/YXpwaFhHTWRyemVITWtHcHJaQkhJQT09-product_image.jpg",name:"Chicken Cury cut With Skin", price:278}
        ]

    let Fruits = [Papaya  ];

    localStorage.setItem('PBO',JSON.stringify(Fruits));

// _____________________________________

     // ----------------Fresh Vegetables Objects----------------------------------------------------------------------------------------------------------------------
  
     let Fresh_Vegetables = [
        {
            name: "Fish & SeaFoods"
        },

        {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/TFRrSXA0RlpDM0ppbktJamdtRi9TUT09-product_image.jpg",name:"Cotla", price:400},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/N1F6akV6czcwK3lHUFhQd0tpQ2NzUT09-product_image.jpg",name:" Rohu", price:400},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/T09YL2VSWWZ6SHBUSllHaGh2bjlDUT09-product_image.jpg",name:"Rohu-Slice", price:500},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/aTZZWDF4aXVMMjFlanNUM0xmdzRaQT09-product_image.jpg",name:"Catla Steaks Without Head", price:699},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/1615716392323_product_5c4b852379ae300f6ea008e5_1.jpg",name:"Fish Popcorn", price:800},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/VUFyY1NsVy9BL3RvRmZrckhlUzRzQT09-product_image.jpg",name:"Prawns(Medium)", price:1000}
        ]

    
    let Vegetables = [Fresh_Vegetables];
    localStorage.setItem('veg',JSON.stringify(Vegetables));

// ___________________________________________________

   // ----------------Fresh Herbs Objects----------------------------------------------------------------------------------------------------------------------
  
   let Fresh_Herbs = [
    {
        name: " Mutton"
    },

    {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/1644858423802_product_5bcf812a752feb5014a2e2f8_1.jpg",name:"Mutton Curry Cut", price:999},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/RjE2ZHoydnVrMDFoVTJ4dTYyNEdiUT09-product_image.jpg",name:" Mutton With Bone", price:799},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/aHpqdTFrUkhCUVdERm1IUENpUVZzUT09-product_image.jpg",name:"Mutton Leg Shoulder", price:1199},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/1644858423884_product_5bcf812a752feb5014a2e2fa_1.jpg",name:"Mutton Keema(Mince)", price:999},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/YlhMMUx3b1RLUXJyUnFURk95WktVZz09-product_image.jpg",name:"Mutton Biriyani Cut", price:850},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/clZlaC9FemJqY2hTNWtIS1IyM040QT09-product_image.jpg",name:"Mutton Chops", price:779}

  ];

  let Herbs = [Fresh_Herbs];
  localStorage.setItem('herbs',JSON.stringify(Herbs));

 
// ____________________________________________________________

      // ----------------Cuts And Sprouts-------------------------------------------------------------------------------------------------------------------
  
      let  Cuts_And_Sprouts = [
        {
            name: "Eggs"
        },

        {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/1615716379823_product_5bcf812a752feb5014a2e2ba_1.jpg",name:"Eggs", price:72},
           {url:"https://ik.imagekit.io/dunzo/tr:w-144,h-144,cm-pad_resize/VVdxZWI2djBHNFFtTHMrU1pSdjAwUT09-product_image.jpg",name:"Natures Farn Fresh Eggs", price:78},
           

    ];

    let Cuts = [ Cuts_And_Sprouts];
    localStorage.setItem('cuts',JSON.stringify(Cuts));
    console.log(Cuts)


// _________________________________________________________




    function display(arr) {
    let main_div = document.getElementById("prds");

        arr.forEach(function(type) {
        type.forEach(function(products,index) {
        if(index === 0){
        let h2 = document.createElement('h2');
        h2.innerText = products.name;
        h2.style.fontWeight = 'bold';
        main_div.append(h2);

                    }else{
                        var div = document.createElement("div");
                        var img = document.createElement("img");
                        img.setAttribute("id","img")
                        var details = document.createElement("div");
                        var name = document.createElement("h4")
                        var quantity = document.createElement("p");
                        var price = document.createElement("h5");
                        var button = document.createElement("button");
                        
        // -------------------Adding all products dynamically.------------------------------------
                        img.src = products.url;
                        name.textContent=products.name;
                        // quantity.textContent=products.volume;
                        price.textContent=`₹ ${products.price}`;
                        button.innerText="+ADD"
                        details.append(name,quantity,price);
                        quantity.setAttribute("class","quantity");
                        name.setAttribute("class","name");
                        price.setAttribute("class","name")
                        details.setAttribute("id","details")
                        div.append(img,details,button);
                        div.setAttribute("id","divs")
                        document.getElementById("prds").append(div);
                        button.addEventListener('click',moveToCart);
                        div.addEventListener('mouseenter',function(){
                        div.querySelector('h4').style.color = 'green';
                        div.setAttribute('class','transform');
                        })
                        div.addEventListener('mouseleave',function(){
                        div.querySelector('h4').style.color = 'black';
                        div.setAttribute('class','transformBack');
                        })
                    }
                    
            })
        });
        before_div = document.getElementById('prds');
    }

    function displayitems(e,id){
        before_element.style = "none";
        console.log(before_div)
        
        while (before_div.firstChild) {
            before_div.removeChild(before_div.lastChild);
        }

        let btn = e.target;
        btn.style.fontSize = "large";
        btn.style.fontWeight = "bold";
        btn.style.color="rgb(0, 179, 122)";
        before_element = btn;

        let itemsHead = document.getElementById('heading');
        itemsHead.innerText = btn.innerText;
        let data = JSON.parse(localStorage.getItem(id));

        if(data == null){
        let main_div = document.getElementById("prds");
        let h2 = document.createElement('h2');
        h2.innerText = "Not Available Sorry..";
        main_div.append(h2);
        }else{
        display(JSON.parse(localStorage.getItem(id)));
        }
       
    }
    


    display(JSON.parse(localStorage.getItem('PBO')));
    display(JSON.parse(localStorage.getItem('cuts')));
    display(JSON.parse(localStorage.getItem('herbs')));
    display(JSON.parse(localStorage.getItem('veg')));
    

    function moveToCart() {
    location.reload();
    let cart = [];
    let isThere = false;
        
    let price = event.target.parentNode.querySelector('h5').innerText;
    let arr = price.split(" ");
    price = Number(arr[1]);

    let item = {
        name:event.target.parentNode.querySelector('h4').innerText,
        img:event.target.parentNode.querySelector('img').src,
        volume:event.target.parentNode.querySelector('p').innerText,
        price:price,
        qty:1,
        };

        console.log(item);

        cart = JSON.parse(localStorage.getItem('dCart')); 

        if(cart === null){
        console.log('set the cart');
        cart = [item];
        localStorage.setItem('dCart',JSON.stringify(cart));
        }else{
        cart.forEach(function(prd){
        if(prd.name === item.name){
        prd.qty = prd.qty + 1;
        isThere = true;
        } 
            });

            if(isThere == false){
            cart[cart.length]=item;
            localStorage.setItem('dCart',JSON.stringify(cart));
            isThere = false;
            }else{
            localStorage.setItem('dCart',JSON.stringify(cart));
            }
            
        }
        if(JSON.parse(localStorage.getItem('dCart')) != null){
        displayCartItems();
        }
       
    }


    function displayCartItems() {
    let total_price = 0;
    let main_div = document.getElementById('products3')
    main_div.style.overflow = 'scroll';
    let cart = JSON.parse(localStorage.getItem('dCart'));
    console.log(cart);
    
        while (main_div.firstChild) {
        main_div.removeChild(main_div.lastChild);
        }

            let p = document.createElement('p');
            p.innerText = 'Your Cart';
            let ul = document.createElement('ul');
            main_div.append(p);

            cart.forEach(function(prd){
            let li = document.createElement('li');
            li.style.display = 'flex';
            li.style.marginBottom = '15px'

            let div1 = document.createElement('div');
            div1.style.width = '40%'
            let h3 = document.createElement('h3');
            h3.innerText = prd.name;
            h3.style.fontWeight = 'lighter';
            let h5 = document.createElement('h5');
            h5.style.fontWeight = 'lighter';
            h5.innerText = prd.volume;

            let div2 = document.createElement('div');
            div2.id = "box";
            div2.style.width = '15%'
            let btn1 = document.createElement('button');
            btn1.id = 'minus';
            btn1.addEventListener('click',function(){
                    
            let name = event.target.parentNode.parentNode.firstChild.querySelector('h3').innerText;

            let cart = JSON.parse(localStorage.getItem('dCart'));

            cart.forEach(function(prd,index){
            if(prd.name == name){
            prd.qty = prd.qty-1;
            if(prd.qty == 0){
            cart.splice(index,1)
                               
            }
            total_price -= prd.price;
            }
            });
            localStorage.removeItem('dCart')
            localStorage.setItem('dCart',JSON.stringify(cart));
            location.reload();
            if(JSON.parse(localStorage.getItem('dCart')).length === 0){
            localStorage.removeItem('dCart')
            }

            })


                let span = document.createElement('span');
                span.id ='val';


                let btn2 = document.createElement('button');
                btn2.id = 'plus';
                btn2.addEventListener('click',function(){
                  
                let name = event.target.parentNode.parentNode.firstChild.querySelector('h3').innerText;

                let cart = JSON.parse(localStorage.getItem('dCart'));

                cart.forEach(function(prd){
                if(prd.name == name){
                prd.qty = prd.qty+1;
                total_price += prd.price;
                }
                });

                localStorage.removeItem('dCart')
                localStorage.setItem('dCart',JSON.stringify(cart));
                location.reload();
                })
                
                span.innerText = prd.qty;
                btn1.innerText = '-';
                btn2.innerText = '+';

                let div3 = document.createElement('div');
                div3.style.width = '20%'
                let h4 = document.createElement('h4');
                h4.innerText = '₹'+ prd.price * prd.qty;

                total_price += prd.price*prd.qty;

                div1.append(h3,h5);
                div2.append(btn1,span,btn2);
                div3.append(h4)
                li.append(div1,div2,div3);
                ul.append(li)
                
            })
                let div4 = document.createElement('div');
                div4.id = 'checkout';
                let checkout_btn = document.createElement('button');
                checkout_btn.innerText = `checkout ₹${total_price}`;
                checkout_btn.setAttribute("class","checkout")
                checkout_btn.addEventListener('click',function(){
                    window.location.href = "../paymentpagepath/pay.html";
                });
                div4.append(checkout_btn);

               main_div.append(ul,div4);
           
    }

    if(JSON.parse(localStorage.getItem('dCart')) != null){
    displayCartItems();
    }
    // -------------------logo redirect to home------------------------------


    document.getElementById("logo").addEventListener("click",redirect);
    function redirect(){
        window.location.href="../index.html"
    }
    //------------------------------adding location;----------------------------

    document.getElementById("location").innerText=JSON.parse(localStorage.getItem("location"));
    document.getElementById("location").addEventListener("click",getLoc);
    function getLoc(){
    var input = prompt("Please enter your location.");
    if(localStorage.getItem("location")==null){
    localStorage.setItem("location",JSON.stringify(input));
    }
    else if(localStorage.getItem("location")!=null){
    var data = localStorage.getItem("location");
    data = JSON.parse(data);
    if(data!=input){
    localStorage.setItem("location",JSON.stringify(input));
    } 
    }
    }
    document.getElementById("cart").addEventListener("click",cart);
    function cart(){
    window.location.href="../pay/pay.html"
    }
        //----------------------------------shops location----------------------------------------

        document.getElementById("head").querySelector("p").innerText=`India > ${JSON.parse(localStorage.getItem("location"))}`

        if(JSON.parse(localStorage.getItem('dCart')) != null){
        var circle = document.getElementById('circle');

        let arr = JSON.parse(localStorage.getItem('dCart'));
        let qty = 0;

        arr.forEach(function(prd){
        qty += prd.qty;
        });

        circle.innerText = qty;
        }else{
        document.getElementById('circle').style.display = "none";
        }
        
</script>